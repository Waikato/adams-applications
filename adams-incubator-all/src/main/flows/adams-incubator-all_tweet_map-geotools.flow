# Project: adams
# Date: 2013-11-08 16:38:27
# User: fracpete
# Charset: UTF-8
#
adams.flow.control.Flow
	-annotation
	Example flow for listens to status updates and displays \nthe ones with geo location data on a world map.
	-actor
		adams.flow.standalone.GlobalActors
			-actor
				adams.flow.sink.SpreadSheetDisplay
					-name
					Tweets
					-short-title
					true
					-x
					-3
			-actor
				adams.flow.sink.Display
					-name
					Progress
					-short-title
					true
			-actor
				adams.flow.sink.GeoToolsMapDisplay
					-name
					TweetMap
					-writer
						adams.gui.print.NullWriter
					-background-shape
					${HOME}/development/projects/adamsfamily/adams-incubator/adams-geotools/src/main/flows/data/ne_110m_admin_0_countries.shp
					-fill-color
					#cccccc
					-info-tool
						adams.flow.sink.infotool.SpreadSheetInfoToolSupplier
							-allow-search
							true
	-actor
		adams.flow.standalone.TwitterConnection
	-actor
		adams.flow.source.Start
	-actor
		adams.flow.control.Trigger
			-name
			query twitter
			-tee
				adams.flow.source.TwitterListener
					-max-updates
					2000
			-tee
				adams.flow.transformer.TwitterFilter
					-expression
					has(latitude) and has(longitude)
			-tee
				adams.flow.transformer.TwitterConverter
					-converter
						adams.data.twitter.SpreadSheetConverter
							-field
							GEO_LATITUDE
							-field
							GEO_LONGITUDE
							-field
							TEXT
			-tee
				adams.flow.transformer.SpreadSheetAppend
					-storage-name
					sheet
			-tee
				adams.flow.control.Count
					-tee
						adams.flow.sink.GlobalSink
							-global
							Progress
					-condition
						adams.flow.condition.bool.Counting
	-actor
		adams.flow.control.Trigger
			-name
			display data
			-tee
				adams.flow.source.StorageValue
					-storage-name
					sheet
			-tee
				adams.flow.control.Tee
					-name
					display
					-tee
						adams.flow.sink.GlobalSink
							-global
							Tweets
			-tee
				adams.flow.transformer.Convert
					-name
					join long/lat
					-conversion
						adams.data.conversion.SpreadSheetJoinColumns
							-columns
							1,2
							-glue
							 
			-tee
				adams.flow.transformer.Convert
					-name
					gps
					-conversion
						adams.data.conversion.SpreadSheetStringColumnToObject
							-no-copy
							true
							-handler
								adams.data.spreadsheet.GPSDecimalDegrees
			-tee
				adams.flow.transformer.Convert
					-name
					layer
					-conversion
						adams.data.conversion.SpreadSheetToGeoToolsLayer
							-generator
								adams.data.conversion.feature.SimplePointGenerator
									-featuretype-name
									tweet
									-gps
									1
									-additional-attributes
									2-last
									-fill-color
									#9999ff
			-tee
				adams.flow.sink.GlobalSink
					-global
					TweetMap
	-flow-execution-listener
		adams.flow.execution.NullListener

